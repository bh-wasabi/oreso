{{#define id="notaCobro"}}
  {{param attribute1="=_created.service"}}
  {{param attribute2="=_created.subType"}}
  {{param removeIfEmptySection="aplicacion"}}
  {{param removeIfEmptyField="importe"}}
  {{param startOnOpen="aplicacion"}}

  {{#section id="aplicacion"}}
    {{#field id="aliasDestino"}}
      {{#onChange}}
        {{set destino="=calc.getPresetPersona('app.aliasMonetaria', aliasDestino, _doc.persona.id).monetaria"}}
        {{set _destino="=calc.getPresetPersona('app.aliasMonetaria', aliasDestino, _doc.persona.id)._monetaria"}}
      {{/onChange}}
    {{/field}}
  {{/section}}

  {{#grid id="aplicacion" section="aplicacion" allowInsert="false" allowRemove="false" applyBaseColumn="saldo" applyTo="importe" applySuggest="saldo" applyValidate="true"}}
    {{column field="lote" label="Referencia" width="200"}}
    {{column field="vencimiento" label="Vencimiento" validateDate="true" width="110"}}
    {{!-- {{column field="ivaFactor" label="Factor IVA" width="80"}} --}}
    {{column field="saldo" label="Saldo" width="150" type="numeric" format="#,.##" readOnly="true"}}
    {{column field="importe" label="Importe" width="150" type="numeric" format="#,.##"}}
    {{column field="formaPago" label="Forma Pago" width="150"}}
    {{column field="referenciaPago" label="Referencia Pago" width="150"}}
    {{column field="aliasDestino" label="Destino" width="60" defaultValue="=_params.aliasDestino"}}
    {{column field="_destino" label="Cuenta Monetaria" width="150"}}
  {{/grid}}
{{/define}}

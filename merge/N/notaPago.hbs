{{#define id="notaPago"}}
  {{param attribute1="=_created.service"}}
  {{param attribute2="=_created.subType"}}
  {{param removeIfEmptySection="aplicacion"}}
  {{param removeIfEmptyField="importe"}}
  {{param startOnOpen="aplicacion"}}

  {{#section id="aplicacion"}}
    {{#field id="aliasOrigen"}}
      {{#onChange}}
        {{set origen="=calc.getPreset('app.aliasTesoreria', aliasOrigen).tesoreria"}}
        {{set _origen="=calc.getPreset('app.aliasTesoreria', aliasOrigen)._tesoreria"}}
      {{/onChange}}
    {{/field}}
  {{/section}}

  {{#grid id="aplicacion" section="aplicacion" keyField="importe" allowInsert="false" allowRemove="false" applyBaseColumn="saldo" applyTo="importe" applySuggest="saldo" applyValidate="true"}}
    {{column field="referencia" label="Referencia" width="200"}}
    {{column field="vencimiento" label="Vencimiento" validateDate="true" width="110"}}
    {{column field="saldo" label="Saldo" width="150" type="numeric" format="#,.##" readOnly="true"}}
    {{column field="importe" label="Importe" width="150" type="numeric" format="#,.##"}}
    {{column field="formaPago" label="Forma Pago" width="150"}}
    {{column field="referenciaPago" label="Referencia Pago" width="150"}}
    {{column field="aliasOrigen" label="Origen" width="55" defaultValue="=_params.aliasOrigen"}}
    {{column field="_origen" label="Cuenta Tesorer√≠a" width="150" required="true"}}
  {{/grid}}
  {{#grid id="adjuntos" section="adjuntos" allowRemove="true" allowSort="true" sortBy="orden, fecha"}}
    {{column field="nombre" width="400"}}
    {{column field="tipo" width="200"}}
    {{column field="fecha" width="100" readOnly="true"}}
    {{column field="ext" width="100" readOnly="true"}}
    {{column field="tamano" width="100" readOnly="true"}}
    {{column field="orden" width="60"}}
  {{/grid}}
  
{{/define}}
